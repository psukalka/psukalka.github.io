<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Tech on Diary Of An Observer</title>
    <link>http://pvsukalkar.in/tech/</link>
    <description>Recent content in Tech on Diary Of An Observer</description>
    <generator>Hugo</generator>
    <language>en-us</language>
    <lastBuildDate>Fri, 30 May 2025 10:26:08 +0530</lastBuildDate>
    <atom:link href="http://pvsukalkar.in/tech/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>Sentry - For The Black</title>
      <link>http://pvsukalkar.in/tech/sentry/</link>
      <pubDate>Fri, 30 May 2025 10:26:08 +0530</pubDate>
      <guid>http://pvsukalkar.in/tech/sentry/</guid>
      <description>&lt;p&gt;&lt;em&gt;Where can I find the logs ?&lt;/em&gt; was one of the initial questions that I asked while understanding our system. I came from a background where you need to see logs to find issues. I was taken aback when I heard that they don&amp;rsquo;t capture logs. I kept wondering how they resolve issues in production.&lt;/p&gt;&#xA;&lt;p&gt;It&amp;rsquo;s been 5+ years now working in the system and I have rarely used logs. It brings a smile to my face when some new joinee asks for logs. With Sentry catching errors has become quite easy. Enable sentry on one of the servers and if any case throws error alerts are raised immediately. Whoever sent the buggy code is responsible to fix it immediately. Sentry alert gives you all details you would ever need to fix that bug. Which API ? Which Machine ? Which line ? What error ? What were the local variables ? &amp;hellip; Thus, we have been able to scale to millions of users without ever depending on logs. Any bug that creeps in, gets killed in nascent stage.&lt;/p&gt;</description>
    </item>
    <item>
      <title>Maintaining A Database</title>
      <link>http://pvsukalkar.in/tech/maintaining-database/</link>
      <pubDate>Wed, 28 May 2025 23:53:13 +0530</pubDate>
      <guid>http://pvsukalkar.in/tech/maintaining-database/</guid>
      <description>&lt;p&gt;We use Django Framework in our system. Django comes with its own ORM for relational databases. There are few tables which are being used from 7+ years now, so we decided to look into them.&lt;/p&gt;&#xA;&lt;p&gt;To check how much space a table is using, we can run following Postgres query:&lt;/p&gt;&#xA;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;     SELECT&#xA;        schemaname,&#xA;        tablename,&#xA;        pg_size_pretty(pg_total_relation_size(schemaname||&amp;#39;.&amp;#39;||tablename)) as total_size,&#xA;        pg_size_pretty(pg_relation_size(schemaname||&amp;#39;.&amp;#39;||tablename)) as table_size,&#xA;        pg_size_pretty(pg_indexes_size(schemaname||&amp;#39;.&amp;#39;||tablename)) as indexes_size&#xA;    FROM pg_tables&#xA;    WHERE tablename = &amp;#39;{table_name}&amp;#39;;&#xA;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;It turned out that the table is using 1.5GB space and its indexes are using 6.5GB space. This came as a surprise to me as I was always under the impression that indexes are smaller than table. Yes, indeed they are smaller but how many indexes you create also matters. It turns out that we had 50+ indexes on our table. Obviously not all of them are being used. So, I checked indexes and their usage with this query:&lt;/p&gt;</description>
    </item>
    <item>
      <title>The Conundrum: Sync Or Async</title>
      <link>http://pvsukalkar.in/tech/the-conundrum/</link>
      <pubDate>Thu, 22 May 2025 21:43:16 +0530</pubDate>
      <guid>http://pvsukalkar.in/tech/the-conundrum/</guid>
      <description>&lt;p&gt;Suppose I migrate my code from being synchronous to asynchronous what does change ? Let&amp;rsquo;s try to think through.&lt;/p&gt;&#xA;&lt;p&gt;Synchronous code execution is very predictable and linear. If you make some network call, it will relax there till the data comes. On the contrary, asynchronous code is quite busy. The poor guy keeps on running in (event) loop juggling multiple tasks concurrently. If it makes any network call it will register an event for that and pause execution there. Meanwhile it (eventloop) will pick and process some other event which is ready.&lt;/p&gt;</description>
    </item>
    <item>
      <title>Understanding Video</title>
      <link>http://pvsukalkar.in/tech/understanding-video/</link>
      <pubDate>Sun, 18 May 2025 00:56:39 +0530</pubDate>
      <guid>http://pvsukalkar.in/tech/understanding-video/</guid>
      <description>&lt;p&gt;Say, I have a &lt;code&gt;video.mp4&lt;/code&gt; file on my system. What exactly does it contain ? The outermost layer is called &lt;code&gt;Container&lt;/code&gt;. There are various type of containers &lt;code&gt;mp4&lt;/code&gt;, &lt;code&gt;mkv&lt;/code&gt;, &lt;code&gt;mov&lt;/code&gt;, &lt;code&gt;flv&lt;/code&gt;, &amp;hellip; Container contains metadata about the file like its title, duration, creation date, &amp;hellip; Then it contains streams of data. They can be video streams, audio streams, subtitle streams, &amp;hellip; This is pictorially explained in following image:&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;http://pvsukalkar.in/images/video-container.svg&#34; alt=&#34;Video Container&#34;&gt;&lt;/p&gt;</description>
    </item>
    <item>
      <title>The Swiss Army Knife</title>
      <link>http://pvsukalkar.in/tech/the-swiss-knife/</link>
      <pubDate>Fri, 16 May 2025 22:38:25 +0530</pubDate>
      <guid>http://pvsukalkar.in/tech/the-swiss-knife/</guid>
      <description>&lt;p&gt;FFmpeg is called the Swiss Army Knife for video and audio. Whatever you want to do with media like compressing, scaling, editing, encoding, decoding, transcoding, streaming, &amp;hellip; FFmpeg can do everything. If it&amp;rsquo;s so special, let&amp;rsquo;s start using it. You can install &lt;a href=&#34;https://ffmpeg.bufferhead.com/&#34;&gt;FFmpeg&lt;/a&gt; on your system.&lt;/p&gt;&#xA;&lt;p&gt;Let&amp;rsquo;s download some video &lt;code&gt;video_1.mp4&lt;/code&gt; . I want to get details about this video. I can do so using:&lt;/p&gt;&#xA;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;ffprobe -v quiet -print_format json -show_format -show_streams video_1.mp4&#xA;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Here we used &lt;code&gt;ffprobe&lt;/code&gt; (that usually comes with ffmpeg).&lt;/p&gt;</description>
    </item>
    <item>
      <title>DRM</title>
      <link>http://pvsukalkar.in/tech/drm/</link>
      <pubDate>Fri, 16 May 2025 00:59:07 +0530</pubDate>
      <guid>http://pvsukalkar.in/tech/drm/</guid>
      <description>&lt;p&gt;Billions Of Dollars are annually lost by production companies due to piracy.&#xA;Someone can download your content and distribute it on free channel. Thus, you lose on revenue that user might have paid.&lt;/p&gt;&#xA;&lt;p&gt;How do you solve this problem ? Or can we even solve it ?&#xA;If someone is playing a movie on TV and then recording it again through high quality camera (thus recreating it), you can&amp;rsquo;t block this. This is called Analog Hole. Thus, you can&amp;rsquo;t protect 100% piracy.&lt;/p&gt;</description>
    </item>
    <item>
      <title>Vector Graphics</title>
      <link>http://pvsukalkar.in/tech/vector-graphics/</link>
      <pubDate>Fri, 09 May 2025 19:51:31 +0530</pubDate>
      <guid>http://pvsukalkar.in/tech/vector-graphics/</guid>
      <description>&lt;p&gt;If you zoom in on any image on your phone, it starts breaking after 2x - 3x zoom. You can see square pixel blocks. But what happens when you zoom in on google map ? Despite how much you zoom (till you hit last block) it doesn&amp;rsquo;t seem to break. I observed similar thing with Figma.&lt;/p&gt;&#xA;&lt;p&gt;What is the magic here ? Why doesn&amp;rsquo;t it break ? Let&amp;rsquo;s try to reverse engineer the problem. How would I achieve it if I want to create such google map like functionality.&lt;/p&gt;</description>
    </item>
    <item>
      <title>Video Scrubbing</title>
      <link>http://pvsukalkar.in/tech/video-scrubbing/</link>
      <pubDate>Thu, 08 May 2025 20:32:53 +0530</pubDate>
      <guid>http://pvsukalkar.in/tech/video-scrubbing/</guid>
      <description>&lt;p&gt;While watching YouTube video, if you hover over the seek bar you can preview video image of that location.&#xA;You can see images even at 10 min even though only 30 sec of video has buffered yet.&#xA;So, if the video has not loaded till 10 min, how is the video player able to display image at that location ? Isn&amp;rsquo;t it interesting ?&lt;/p&gt;&#xA;&lt;p&gt;This happens with a feature called video scrubbing. We need to process the uploaded video for video scrubbing.&#xA;When a video is uploaded (say of 10 min), we can take snapshots at regular intervals (of say 3sec).&#xA;So, for a 10 min video there will be 10*60/3 = 200 snapshots. We can generate these snapshots using ffmpeg.&lt;/p&gt;</description>
    </item>
    <item>
      <title>HAProxy</title>
      <link>http://pvsukalkar.in/tech/haproxy/</link>
      <pubDate>Thu, 24 Apr 2025 23:15:11 +0530</pubDate>
      <guid>http://pvsukalkar.in/tech/haproxy/</guid>
      <description>&lt;p&gt;When you go to &lt;a href=&#34;https://www.haproxy.org/&#34;&gt;HAProxy Site&lt;/a&gt;, the small case fonts and hardly any effort on UI make you think &lt;code&gt;do they even maintain this site ?&lt;/code&gt; Are HAProxy days done ? But if you make effort to read along, you fumble on this line: &lt;em&gt;Most users report having never ever faced any single crash and claim that HAProxy is the most solid part of their infrastructure. Finding machines with HAProxy processes being up for more than 3 years is not exceptional at all!&lt;/em&gt; Phew!! Flexing of highest caliber.&lt;/p&gt;</description>
    </item>
    <item>
      <title>Caddy</title>
      <link>http://pvsukalkar.in/tech/caddy/</link>
      <pubDate>Wed, 23 Apr 2025 01:10:18 +0530</pubDate>
      <guid>http://pvsukalkar.in/tech/caddy/</guid>
      <description>&lt;p&gt;Just as a golf caddie makes the game easier for golfers by carrying their equipments and offering guidance, the Caddy web server aims to make web hosting easier by handling complicated tasks (like SSL/TLS certificates) automatically. With caddy, you don&amp;rsquo;t need to worry about your certificate expiration. It started back in the days when Let&amp;rsquo;s Encrypt was just starting and enabling HTTPS on your website was a headache and costly.&lt;/p&gt;</description>
    </item>
    <item>
      <title>Nginx</title>
      <link>http://pvsukalkar.in/tech/nginx/</link>
      <pubDate>Sun, 20 Apr 2025 21:56:59 +0530</pubDate>
      <guid>http://pvsukalkar.in/tech/nginx/</guid>
      <description>&lt;p&gt;Nginx can be used for multiple purposes like web serving, load balancing or reverse proxying. It was designed to solve C10k problem so obviously it can handle large number of connections simultaneously. Besides, it also excels at serving static content. But how does it achieve this ?&lt;/p&gt;&#xA;&lt;p&gt;Nginx follows an asynchronous event-driven architecture. There is a master process that manages all worker processes. Typically there are as many workers as there are CPU cores. Each worker has an event loop running inside it. When an event comes on socket, OS notifies worker. Worker registers interest in the event and moves ahead. When data is received from client, a read event is triggered which is then processed by worker. Thus, the worker continues with its events without being blocked.&lt;/p&gt;</description>
    </item>
    <item>
      <title>Iron Beneath the Rust</title>
      <link>http://pvsukalkar.in/tech/iron-beneath-the-rust/</link>
      <pubDate>Sat, 19 Apr 2025 20:14:06 +0530</pubDate>
      <guid>http://pvsukalkar.in/tech/iron-beneath-the-rust/</guid>
      <description>&lt;p&gt;Having worked on Python for 6+ years, learning Rust took me back to C/C++ days in college. Compile the code before running it. With that it also brought back the nostalgic fear of pointers. Rust put all of the fears to rest.&lt;/p&gt;&#xA;&lt;p&gt;There are two types of memory: Stack and Heap. As the name suggests on stack memory things will be put one above other and popped in reverse order. Since you know where you are putting things and removing from, stack memory is extremely fast.&lt;/p&gt;</description>
    </item>
    <item>
      <title>Rustic</title>
      <link>http://pvsukalkar.in/tech/rust-ic/</link>
      <pubDate>Fri, 18 Apr 2025 23:11:43 +0530</pubDate>
      <guid>http://pvsukalkar.in/tech/rust-ic/</guid>
      <description>&lt;p&gt;I have been hearing a lot about &lt;code&gt;Rust&lt;/code&gt; lately. How it is fast and achieves near C/C++ performance. So, I was thinking of usecases where I can use it.&lt;/p&gt;&#xA;&lt;p&gt;I have been using Python (at work) for many years now. Python is a good starting point to embody business ideas as it significantly reduces development time. Libraries are readily available for almost all use cases.&lt;/p&gt;&#xA;&lt;p&gt;But when your product is built and is handling traffic at scale, you need to go deeper. Python can be a barrier too sometimes. We have migrated one of our high-traffic module from Python (Django) to Java (Spring Webflux) and have seen a 5x impovement in response times. That got me thinking about other options too and eventual interest in &lt;code&gt;Rust&lt;/code&gt;.&lt;/p&gt;</description>
    </item>
    <item>
      <title>Memory Overload</title>
      <link>http://pvsukalkar.in/tech/memory-overload/</link>
      <pubDate>Fri, 18 Apr 2025 21:02:55 +0530</pubDate>
      <guid>http://pvsukalkar.in/tech/memory-overload/</guid>
      <description>&lt;p&gt;An Issue was reported that videos were not being uploaded from google drive to S3. We have an asynchronous task that transfers files from google drive to S3 (for further processing).&lt;/p&gt;&#xA;&lt;p&gt;My first assumption was that the tasks might have been queued. Also there weren&amp;rsquo;t any sentry alerts, so I ignored the issue. Even after few hours, the issue was not resolved so it seemed something was cooking.&lt;/p&gt;&#xA;&lt;p&gt;I tried to upload a 2MB file from drive and it got processed instantaneously. So, the pipeline was working fine. I looked at the file that they were trying to upload. It was a whopping 8.3GB file. That raised some doubts. Is google drive blocking such file ? Is some network connection getting reset ? Is S3 limiting file upload ?&lt;/p&gt;</description>
    </item>
    <item>
      <title>Whats Cookie-ing</title>
      <link>http://pvsukalkar.in/tech/whats-cookie-ing/</link>
      <pubDate>Sat, 12 Apr 2025 22:46:43 +0530</pubDate>
      <guid>http://pvsukalkar.in/tech/whats-cookie-ing/</guid>
      <description>&lt;p&gt;We are trying to improve security of our CDN with cloudfront cookies. Cloudfront provides two approaches: one using signed urls and the other using signed cookies. The later suits better for our media usecase where there are lot of fragmented files.&lt;/p&gt;&#xA;&lt;p&gt;Anyway, I generated a privately signed cookie and sent it in an API response. Then I used this in sending an API request from Postman. And voila it worked. POC was successful.&lt;/p&gt;</description>
    </item>
    <item>
      <title>Hosting a Website</title>
      <link>http://pvsukalkar.in/tech/hosting-a-site/</link>
      <pubDate>Sun, 30 Mar 2025 19:34:07 +0530</pubDate>
      <guid>http://pvsukalkar.in/tech/hosting-a-site/</guid>
      <description>&lt;p&gt;Now that you have purchased a domain, what will it show ? where will your code reside ? where your images / video files be stored ? how will you run scripts to build your code ?&lt;/p&gt;&#xA;&lt;p&gt;Let&amp;rsquo;s go step by step.&#xA;Say I just want to display an &lt;code&gt;index.html&lt;/code&gt; page on my website to host my resume.&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;If you have an AWS account, a simplest way is to create a static website in S3. Create a bucket in S3, create an &lt;code&gt;index.html&lt;/code&gt; page in it. Enable &lt;code&gt;static website hosting&lt;/code&gt; for your bucket. Create &lt;code&gt;CNAME&lt;/code&gt; record in your domain to point to this static website and your resume is up.&lt;/p&gt;</description>
    </item>
    <item>
      <title>Buying a Domain</title>
      <link>http://pvsukalkar.in/tech/buying-a-domain/</link>
      <pubDate>Sun, 30 Mar 2025 19:22:01 +0530</pubDate>
      <guid>http://pvsukalkar.in/tech/buying-a-domain/</guid>
      <description>&lt;p&gt;Say you want to build a house. Before that you will need to buy a plot (land) where you will build the house.&lt;/p&gt;&#xA;&lt;p&gt;Similarly, if you want to build something that people can see on internet, you will have to buy some space on internet.&#xA;This space is &lt;code&gt;domain&lt;/code&gt;.&lt;/p&gt;&#xA;&lt;p&gt;To purchase plot, you need to make registration at registrar office and pay stamp duty fees.&lt;/p&gt;&#xA;&lt;p&gt;Similar is the process of buying a domain.&lt;/p&gt;</description>
    </item>
  </channel>
</rss>
